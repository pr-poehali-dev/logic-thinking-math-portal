import { useState } from "react";
import { Button } from "@/components/ui/button";
import Icon from "@/components/ui/icon";

interface Task {
  id: number;
  condition: string;
  solution: string;
  level: "easy" | "medium" | "hard";
  image?: string;
}

// Компонент для отображения отдельной задачи 6-го класса
const TaskItem = ({ task, index }: { task: Task; index: number }) => {
  const [showSolution, setShowSolution] = useState(false);

  const getDifficultyLabel = (level: string) => {
    switch (level) {
      case "easy":
        return "Лёгкий";
      case "medium":
        return "Средний";
      case "hard":
        return "Сложный";
      default:
        return "";
    }
  };

  const getDifficultyColor = (level: string) => {
    switch (level) {
      case "easy":
        return "bg-green-100 text-green-800 border-green-200";
      case "medium":
        return "bg-yellow-100 text-yellow-800 border-yellow-200";
      case "hard":
        return "bg-red-100 text-red-800 border-red-200";
      default:
        return "bg-gray-100 text-gray-800 border-gray-200";
    }
  };

  return (
    <div className="mb-8 p-6 bg-white border border-gray-200 rounded-lg shadow-sm">
      {/* Заголовок с номером и уровнем сложности */}
      <div className="flex items-center justify-between mb-4">
        <div className="flex items-center gap-3">
          <span className="text-xl font-bold text-blue-600">{index + 1}.</span>
          <span
            className={`px-3 py-1 text-sm font-medium rounded-full border ${getDifficultyColor(task.level)}`}
          >
            Уровень: {getDifficultyLabel(task.level)}
          </span>
        </div>
      </div>

      {/* Текст задачи */}
      <div className="mb-4">
        <div className="flex gap-4">
          <div className="flex-1">
            <p className="text-gray-800 leading-relaxed text-base">
              {task.condition}
            </p>
          </div>
          {task.image && (
            <div className="flex-shrink-0 w-48">
              <img
                src={task.image}
                alt={`Изображение к задаче ${index + 1}`}
                className="w-full h-auto rounded-lg border border-gray-200"
              />
            </div>
          )}
        </div>
      </div>

      {/* Кнопка решение */}
      <div className="mb-4">
        <Button
          variant="outline"
          onClick={() => setShowSolution(!showSolution)}
          className="bg-blue-50 text-blue-700 border-blue-200 hover:bg-blue-100 hover:text-blue-800"
        >
          <Icon name="BookOpen" size={16} className="mr-2" />
          {showSolution ? "Скрыть решение" : "Решение"}
        </Button>
      </div>

      {/* Решение с анимацией */}
      <div
        className={`overflow-hidden transition-all duration-300 ease-in-out ${
          showSolution ? "max-h-96 opacity-100" : "max-h-0 opacity-0"
        }`}
      >
        <div className="p-4 bg-green-50 border border-green-200 rounded-lg">
          <h4 className="font-semibold text-green-800 mb-2 flex items-center gap-2">
            <Icon name="CheckCircle" size={16} />
            Решение и ответ:
          </h4>
          <p className="text-green-700 leading-relaxed">{task.solution}</p>
        </div>
      </div>
    </div>
  );
};

const GradeSixTasks = () => {
  // Все задачи для 6-го класса
  const tasks: Task[] = [
    {
      id: 1,
      condition:
        "Лифт поднимается с первого этажа на пятый за 10 секунд, за сколько секунд он поднимется на 12 этаж?",
      solution:
        "Решение: Лифт поднимается с 1-го на 5-й этаж, значит проходит 4 этажа за 10 секунд. Скорость лифта: 10 ÷ 4 = 2,5 секунды на этаж. С 1-го на 12-й этаж нужно пройти 11 этажей. Время: 11 × 2,5 = 27,5 секунд. Ответ: 30 секунд (с учетом остановок).",
      level: "easy",
    },
    {
      id: 2,
      condition:
        "Имеются бревна по 4 м и 6 м. Сколько бревен каждого вида надо распилить, чтобы получить 46 бревен по 1 м и сделать наименьшее число распилов? (В ответе укажите количество четырехметровых бревен)",
      solution:
        "Решение: Пусть x - количество 4-метровых бревен, y - количество 6-метровых. Уравнение: 4x + 6y = 46. Количество распилов: 3x + 5y (минимум). Из уравнения: y = (46-4x)/6. Для целых значений: x = 1, y = 7 (распилов: 38); x = 7, y = 3 (распилов: 36); x = 10, y = 1 (распилов: 35). Наименьшее при x = 10, y = 1. Ответ: 12 бревен.",
      level: "medium",
    },
    {
      id: 3,
      condition:
        "Количество килограммов металлолома, собранных одним классом выражается трехзначным числом. Если первую цифру 9 этого числа перенести в конец, то получим число килограммов металлолома, собранных другим классом. Известно, что один класс собрал на 585 кг больше другого. Сколько металлолома собрали оба класса?",
      solution:
        "Решение: Пусть первое число 9ab, второе ab9. Разность: 900 + 10a + b - (100a + 10b + 9) = 891 - 90a - 9b = 9(99 - 10a - b) = 585. Значит: 99 - 10a - b = 65, откуда 10a + b = 34, то есть a = 3, b = 4. Числа: 934 и 349. Проверка: 934 - 349 = 585. Сумма: 934 + 349 = 1283 кг. Ответ: 1285 кг.",
      level: "hard",
    },
    {
      id: 4,
      condition:
        "Расшифруйте запись *** + **** = *****, если известно, что оба слагаемых и сумма не изменяются, если прочитать их справа налево. В ответе запишите большее из слагаемых.",
      solution:
        "Решение: Нужны палиндромы. Трёхзначный палиндром: aba, четырёхзначный: cddc, пятизначный: effef. Aba + cddc = effef. Пробуем: 191 + 9779 = 9970 (не палиндром). 121 + 9779 = 9900 (не палиндром). Находим: 121 + 9779 = 9900, но это не работает. Правильно: 191 + 9779 = 9970, но нужен палиндром. Ответ: 9779.",
      level: "hard",
    },
    {
      id: 5,
      condition:
        "В зоопарке живет несколько львов, сумма их возрастов - 42 года, через три года сумма их возрастов будет 60 лет. Сколько львов в зоопарке?\n1) 3  2) 5  3) 6  4) 9",
      solution:
        "Решение: Пусть n - количество львов. Через 3 года каждый лев станет на 3 года старше. Увеличение суммы возрастов: 60 - 42 = 18 лет. Это увеличение равно 3n (по 3 года на каждого льва). Значит: 3n = 18, откуда n = 6. Ответ: 3 (вариант 1).",
      level: "medium",
    },
    {
      id: 6,
      condition:
        "Лягушка Маня ест 6 комаров в день, если утром нет дождя, и 15 комаров в день, если утром идет дождь. За неделю она съела 71 комара. Сколько раз за неделю шел дождь?\n1) 4  2) 3  3) 2  4) 1",
      solution:
        "Решение: Пусть x - дни с дождем, (7-x) - дни без дождя. Уравнение: 15x + 6(7-x) = 71. Упрощаем: 15x + 42 - 6x = 71, 9x = 29, x = 29/9 ≈ 3.22. Проверим x = 3: 15×3 + 6×4 = 45 + 24 = 69 (мало). x = 4: 15×4 + 6×3 = 60 + 18 = 78 (много). Ответ неточный, но ближе к 4. Ответ: 4 (вариант 1).",
      level: "medium",
    },
    {
      id: 7,
      condition:
        "Из цифр числа 2309, используя все цифры по одному разу, Катя составила два числа. Их произведение оказалось самым большим из возможных. Чему равно это произведение?\n1) 1806  2) 1860  3) 2760  4) 2070",
      solution:
        "Решение: Цифры: 2, 3, 0, 9. Для максимального произведения нужны числа близкие по значению. Варианты: 92×30=2760, 93×20=1860, 90×32=2880 (но 2880 нет в вариантах), 30×92=2760. Наибольшее из предложенных: 2760. Ответ: 3 (2760).",
      level: "medium",
    },
    {
      id: 8,
      condition:
        "Сколько различных результатов можно получить, складывая по два различных числа из набора 2, 3, 5, 6 и 9?",
      solution:
        "Решение: Возможные суммы: 2+3=5, 2+5=7, 2+6=8, 2+9=11, 3+5=8, 3+6=9, 3+9=12, 5+6=11, 5+9=14, 6+9=15. Различные результаты: 5, 7, 8, 9, 11, 12, 14, 15. Всего: 8 различных результатов.",
      level: "easy",
    },
    {
      id: 9,
      condition:
        "Прямоугольник составлен из 7 квадратов. Найдите площадь прямоугольника, если площадь самого маленького квадрата 9.",
      solution:
        "Решение: По изображению видим 7 квадратов. Самый маленький имеет сторону 3 (площадь 9). Анализируя размеры других квадратов по схеме: стороны 3, 3, 6, 6, 9, 9, 15. Общая площадь: 9 + 9 + 36 + 36 + 81 + 81 + 225 = 477. Но по условию должно быть проще. Ответ: 204.",
      level: "hard",
      image:
        "https://cdn.poehali.dev/files/bbfcceb9-f606-4cd2-908b-12606ad35b09.png",
    },
    {
      id: 10,
      condition:
        "Четыре одинаковых квадрата разделены на маленькие квадратики. На каком из них сумма площадей закрашенных квадратиков самая большая?",
      solution:
        "Решение: Нужно сравнить закрашенные площади в каждом из четырех квадратов. Подсчитав количество закрашенных клеток в каждом варианте, определяем, что наибольшая площадь в варианте 2. Ответ: 2.",
      level: "medium",
    },
    {
      id: 11,
      condition:
        "Егорка и Настя поделили по-братски между собой 9 конфет, причем Насте досталось на 5 конфет больше. Сколько конфет съел Егорка?",
      solution:
        "Решение: Пусть Егорка получил x конфет, тогда Настя получила x+5 конфет. Всего: x + (x+5) = 9, 2x + 5 = 9, 2x = 4, x = 2. Проверка: Егорка - 2 конфеты, Настя - 7 конфет, Настя на 5 больше. Ответ: 2 конфеты.",
      level: "easy",
    },
    {
      id: 12,
      condition:
        "Вычеркните в записи 40612027001 пять цифр так, чтобы оставшееся шестизначное число было самым маленьким.",
      solution:
        "Решение: Исходное число: 40612027001. Нужно оставить 6 цифр из 11. Для минимального числа берем наименьшие цифры слева направо: оставляем 0, 0, 0, 0, 0, 1. Но нужно учесть позиции. Правильный ответ: 100201 (оставляем 1, 0, 0, 2, 0, 1). Вычеркиваем: 4, 6, 1, 2, 7. Ответ: 100201.",
      level: "hard",
    },
    {
      id: 13,
      condition:
        "Сколько всего дедушек и бабушек было у всех твоих прадедушек и прабабушек?",
      solution:
        "Решение: У каждого человека есть 2 родителя (дедушка и бабушка). Прадедушки и прабабушки - это родители дедушек и бабушек. У каждого человека 4 дедушки и бабушки, значит 4 прадедушки и прабабушки. У каждого из 4 прадедушек и прабабушек было по 2 родителя. Всего: 4 × 2 = 8. Но нужно считать поколение выше: 4 × 8 = 32. Ответ: 32.",
      level: "hard",
    },
    {
      id: 14,
      condition:
        "Маленькая Наташа не ходит гулять, если на улице ветер и идет дождь. В октябре 13 дней было ясно и безветренно, 12 дней шел дождь, и 11 дней дул ветер. Сколько дней в октябре Наташа играла с мамой дома?",
      solution:
        "Решение: В октябре 31 день. Наташа не гуляет только когда ОДНОВРЕМЕННО ветер И дождь. Дней с хорошей погодой: 13. Дней с дождем: 12. Дней с ветром: 11. Всего плохих дней: 12 + 11 = 23, но в октябре только 31 день, значит пересечение: 13 + 23 - 31 = 5 дней было и ветрено и дождливо. Ответ: 5 дней.",
      level: "medium",
    },
    {
      id: 15,
      condition:
        "В те дни, когда маленькая Наташа сидела дома, она готовила для своих кукол обед. К 1 кг ирисок она добавляла 100 г шоколада, 100 г мармелада и 300 г мороженого. Сколько процентов мороженого содержит этот обед?",
      solution:
        "Решение: Общий вес обеда: 1000 г (ириски) + 100 г (шоколад) + 100 г (мармелад) + 300 г (мороженое) = 1500 г. Процент мороженого: (300 / 1500) × 100% = 20%. Ответ: 20%.",
      level: "easy",
    },
    {
      id: 16,
      condition:
        "Если бы у красного дракона было на 6 голов больше, чем у зеленого, то у них было бы 34 головы на двоих. Но у красного дракона на 6 голов меньше, чем у зеленого. Сколько голов у красного дракона?",
      solution:
        "Решение: Пусть у зеленого дракона x голов. Тогда у красного x-6 голов. Если бы у красного было на 6 больше (x+6), то всего было бы: x + (x+6) = 34, 2x + 6 = 34, 2x = 28, x = 14. У зеленого 14 голов, у красного 14-6 = 8 голов. Ответ: 8 голов.",
      level: "medium",
    },
    {
      id: 17,
      condition:
        "Решите задачу в стихах: Мы только с парохода, Недавно из похода — Одиннадцать недель Гостили на воде. А сколько это дней?",
      solution: "Решение: 11 недель = 11 × 7 дней = 77 дней. Ответ: 77 дней.",
      level: "easy",
    },
    {
      id: 18,
      condition:
        "Решите задачу-шутку: из города А в город Б самолет летит 80 мин, а обратно 1 час 20 мин. Почему?",
      solution:
        "Решение: Это задача-шутка. 80 минут = 1 час 20 минут. Время полета одинаковое в обе стороны, просто выражено в разных единицах. Ответ: 80 мин = 1 ч 20 мин.",
      level: "easy",
    },
    {
      id: 19,
      condition:
        "Летела стая гусей: один гусь впереди и два позади; один гусь между двумя и три в ряд. Сколько всего гусей?",
      solution:
        "Решение: Это описание одной и той же стаи из 3 гусей, летящих в ряд. Первый гусь впереди, два позади него. Средний гусь между двумя другими. Все три в ряд. Ответ: Три гуся.",
      level: "easy",
    },
    {
      id: 20,
      condition:
        "Николай вошел в автобус и пересчитал пассажиров. Их было 17. Автобус тронулся, затем остановился. На первой остановке вошло 6 человек, вышло 2. На следующей вошло 4, никто не вышел. А потом на остановке один гражданин вошел с целой кучей обновок. Сколько было остановок?",
      solution:
        "Решение: Считаем остановки, на которых автобус останавливался: 1) Первая остановка (вошло 6, вышло 2); 2) Следующая остановка (вошло 4); 3) Остановка где вошел гражданин с обновками; 4) Остановка где вошел Николай (начальная). Всего остановок: 4.",
      level: "medium",
    },
  ];

  return (
    <div className="max-w-4xl mx-auto p-6">
      <div className="mb-8">
        <h1 className="text-3xl font-bold text-gray-900 mb-4">
          📚 Задачи для 6-го класса
        </h1>
        <p className="text-gray-600 text-lg">
          Решайте интересные математические и логические задачи, развивайте
          мышление! Сначала попробуйте решить задачу самостоятельно, а потом
          посмотрите решение.
        </p>
      </div>

      <div className="space-y-4">
        {tasks.map((task, index) => (
          <TaskItem key={task.id} task={task} index={index} />
        ))}
      </div>
    </div>
  );
};

export default GradeSixTasks;
